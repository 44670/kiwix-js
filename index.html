<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>Evopedia</title>
        <meta name="description" content="Offline wikipedia reader"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--
        Port of Evopedia (offline wikipedia reader) in HTML5/Javascript, with Firefox OS as the primary target
        The original application is at http://www.evopedia.info/
        It uses wikipedia dumps located at http://dumpathome.evopedia.info/dumps/finished
        
        Author : Mossroy - mossroy@free.fr
        Math image algorithm contributed by christian@evopedia.info
        
        License:
        
            This program is free software; you can redistribute it and/or modify it
            under the terms of the GNU General Public License as published by the
            Free Software Foundation; either version 3 of the License, or (at your
            option) any later version.
        
            This program is distributed in the hope that it will be useful, but
            WITHOUT ANY WARRANTY; without even the implied warranty of
            MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
            General Public License for more details.
        
            You should have received a copy of the GNU General Public
            License along with this program; if not, see
            <http://www.gnu.org/licenses/>.
        
        -->

        <link rel="stylesheet" href="css/mediawiki-main.css">
        <link rel="stylesheet" href="css/app.css">
        <!-- Bootstrap -->
        <link href="css/bootstrap.css" rel="stylesheet" media="screen">
        <link href="css/bootstrap-glyphicons.css" rel="stylesheet" media="screen">
    </head>
    <body role="application">
        <section id="search-article" role="region">
            <header id="top">
                <nav class="navbar" role="navigation">
                  <!-- Brand and toggle get grouped for better mobile display -->
                  <div class="navbar-header">
                    <button type="button" id="navbarToggle" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand">Evopedia</a>
                  </div>

                  <!-- Collect the nav links, forms, and other content for toggling -->
                  <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
                      <li id="liHomeNav" class="active"><a href="#" id="btnHome">Home</a></li>
                      <li id="liConfigureNav"><a href="#" id="btnConfigure">Configure</a></li>
                      <li id="liAboutNav"><a href="#" id="btnAbout">About</a></li>
                    </ul>
                  </div><!-- /.navbar-collapse -->
                </nav>


                <div class="container">
                <form id="formTitleSearch" class="form-inline">
                    <div class="input-group">
                        <input type="text" id="prefix" placeholder="Search Wikipedia..." class="form-control" />
                        <span class="input-group-btn">
                            <a class="btn btn-default" id="searchTitles" href="#"><span class="glyphicon glyphicon-search"></span></a>
                        </span>                
                    </div>
                    <img id="searchingForTitles" src="img/spinner.gif"  style="display: none;"/>
                </form>
                </div>
            </header>
            <article class="view-content">
                <div id="about" style="display: none;">
                    <h2>About</h2>
                    This is a port of Evopedia (offline wikipedia reader) in HTML5/Javascript, with Firefox OS as the primary target
                    <br />
                    The original application (developed in Qt) is at <a href="http://www.evopedia.info/" target="_blank">http://www.evopedia.info/</a>
                    <br />
                    <br />
                    To use it, you have to first download locally an archive from <a href="http://dumpathome.evopedia.info/dumps/finished" target="_blank">http://dumpathome.evopedia.info/dumps/finished</a>, from a regular computer.
                    <br />If you get a compressed archive (.zip, .tar.gz or .tar.bz2), you will have to decompress it.
                    <br />For a quick test, you can start with the dump called <a href="http://evopedia.info/dumps/wikipedia_small_2010-08-14.tar.gz" target="_blank">"small"</a> : it can be downloaded through HTTP and contains a very small subset of the English archive (note that the hyperlinks between articles will rarely work, as a lot of articles are missing in it).
                    <br />After that, you can download an archive in your language, through a Bittorrent client. Check its size : these archives take several GB each.
                    <br />
                    <br />
                    <ul>
                        <li>On a Firefox OS device, you simply have to put the archive files in any subdirectory of your sdcard (ex: /wikipedia_small_2010-08-14). The application needs to be installed to have the right to read the archive. For now, you have to install it manually (use the push feature of the Firefos OS Simulator). I hope it will soon be available in the MarketPlace</li>
                        <li>On the Firefos OS simulator, you have to put the archive files in any subdirectory in a "fake-sdcard" folder of your firefox profile (ex : ~/.mozilla/firefox/xxxx.default/extensions/r2d2b2g@mozilla.org/profile/fake-sdcard/wikipedia_small_2010-08-14). You need to install the application from the dashboard of the simulator</li>
                        <li>On desktops, it works on recent Firefox and Chromium, and probably on some other browsers (it even seems to work on IE10). In this case, you have to manually select the files from your archive (see the configuration section)</li>
                        <li>On Android, it does not seem to work for now (tried with internal browser, Chrome and Firefox) because you can not select all the files of an archive</li>
                    </ul>
                    <br />
                    It's still a beta version : there are many ways this could be enhanced (suggestions and patches are welcome : the source code is on <a href="https://github.com/mossroy/evopedia-html5" target="_blank">github</a>). In particular :
                    <ul>
                        <li>It is not easy to use on the Peak device from Geeksphone because the buttons and inputs are too small</li>
                        <li>Some features of the original application still have to be implemented : in particular the "Articles nearby" feature (geolocation)</li>
                    </ul>
                    The <a href="https://github.com/mossroy/evopedia-html5/issues" target="_blank">bugtracker</a> is on github too. I use it as my roadmap.
                    <br />Alternatively, you can send your feedback <a href="mailto:mossroy@free.fr?subject=Feedback%20about%20Evopedia%20HTML5">by email</a>.
                    <br />In all cases, please give me as much detail as you can : which device or browser you are using, which archive, which articles etc.
                </div>
                
                <div id="configuration" style="display: none;">
                    <h2>Configuration</h2>
                    This application needs an archive of wikipedia to work. If you did not download one yet, please see the About section
                    <div id="openLocalFiles" style="display: none;">
                        <br /> Please select all the files inside the archive (wikipedia_*.dat, metadata.txt etc)<br />
                        <input type="file" id="archiveFiles" multiple class="btn" /><br />
                    </div>
                    <div id="scanningForArchives" style="display: none;">
                        <br /> Scanning your sdcard for archives... Please wait <img src="img/spinner.gif" />
                    </div>
                    <div id="chooseArchiveFromLocalStorage" style="display: none;">
                        <br /> Please select the archive you want to use : <select id="archiveList" class="form-control"></select>
                    </div>
                    <br />
                </div>
                
                <div id="welcomeText" class="container">
                    You can search the content of your Wikipedia archive by typing in the above search field.
                    <br />It will propose articles starting with what you typed
                </div>
                
                <!-- List of articles matching the typed prefix -->
                <div class="container">
                    <div id="titleList" class="list-group">
                    </div>
                </div>
                <div id="readingArticle" style="display: none;">
                    Reading article <span id="articleName"></span> from archive... Please wait <img src="img/spinner.gif" />
                </div>
                <div id="articleContent">&nbsp;</div>
                <br />
            </article>
            <footer>
                <div id="navigationButtons" class="btn-toolbar">
                    <!-- We need to restrict the size of this navbar,
                    to avoid the top button to be in the scrollbar area :
                    on a device, it can trigger a "page down" of the scrollbar -->
                    <div class="restrictedSize">
                        <a class="btn btn-lg pull-left" id="btnHomeBottom" title="Home"><span class="glyphicon glyphicon-home"></span></a>
                        <a class="btn btn-lg" id="btnBack" title="Back"><span class="glyphicon glyphicon-circle-arrow-left"></span></a>
                        <a class="btn btn-lg" id="btnForward" title="Forward"><span class="glyphicon glyphicon-circle-arrow-right"></span></a>
                        <a class="btn btn-lg pull-right" id="btnTop" title="Top" href="#top"><span class="glyphicon glyphicon-arrow-up"></span></a>
                    </div>
                </div>
            </footer>
        </section>

        <!-- Using require.js, a module system for javascript, include the
             js files. This loads "main.js", which in turn can load other
             files, all handled by require.js:
             http://requirejs.org/docs/api.html#jsfiles -->
        <script type="text/javascript"
                data-main="js/init.js"
        src="js/lib/require.js"></script>
    </body>
</html>
