<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>Evopedia</title>
        <meta name="description" content="Offline wikipedia reader"> 
        <meta name="viewport" content="width=device-width">
        <!--
        Port of Evopedia (offline wikipedia reader) in HTML5/Javascript, with Firefox OS as the primary target
        The original application is at http://www.evopedia.info/
        It uses wikipedia dumps located at http://dumpathome.evopedia.info/dumps/finished
        
        Author : Mossroy - mossroy@free.fr
        Math image algorithm contributed by christian@evopedia.info
        
        License:
        
            This program is free software; you can redistribute it and/or modify it
            under the terms of the GNU General Public License as published by the
            Free Software Foundation; either version 3 of the License, or (at your
            option) any later version.
        
            This program is distributed in the hope that it will be useful, but
            WITHOUT ANY WARRANTY; without even the implied warranty of
            MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
            General Public License for more details.
        
            You should have received a copy of the GNU General Public
            License along with this program; if not, see
            <http://www.gnu.org/licenses/>.
        
        -->

        <link rel="stylesheet" href="css/mediawiki-main.css">
        <link rel="stylesheet" href="css/app.css">
        <!-- Bootstrap -->
        <link href="css/bootstrap.css" rel="stylesheet" media="screen">
    </head>
    <body role="application">
        <section id="search-article" role="region">
            <header>
                <h1>Evopedia</h1>
                <br />
                <form id="formTitleSearch" class="form-search">
                    <div class="input-append">
                        <input type="text" id="prefix" value="" placeholder="Find titles starting with..." class="input-medium search-query"/>&nbsp;
                        <a class="btn" id="searchTitles" href="#"><i class="icon-search"></i></a>
                    </div>
                    <img id="searchingForTitles" src="img/spinner.gif"  style="display: none;"/>
                </form>
            </header>
            <article class="view-content">
                <div id="about">
                    <h2>About</h2>
                    This is a preliminary work on the port of Evopedia (offline wikipedia reader) in HTML5/Javascript, with Firefox OS as the primary target
                    <br />
                    The original application is at <a href="http://www.evopedia.info/" target="_blank">http://www.evopedia.info/</a>
                    <br />
                    <br />
                    To use it, you have to first download locally a dump from <a href="http://dumpathome.evopedia.info/dumps/finished" target="_blank">http://dumpathome.evopedia.info/dumps/finished</a> (with a Bittorrent client).
                    <br />
                    <ul>
                        <li>On desktops, it works on recent Firefox and Chrome, and maybe on other browsers. In this case, you have to select manually some files from your dump (see below)</li>
                        <li>On the Firefos OS simulator, you have to put the archive files in a "fake-sdcard" folder of your firefox profile (ex : ~/.mozilla/firefox/xxxx.default/extensions/r2d2b2g@mozilla.org/profile/fake-sdcard). It looks for file titles.idx in it. You need to install the application from the dashboard of the simulator (due to security restrictions in Firefox OS : only certified webapps can access the sdcard)</li>
                        <li>On a real Firefox OS device, you simply have to put the archive files anywhere in your sdcard, so that it finds titles.idx on it. For now, the application has to be installed manually (use the push feature of the Firefos OS Simulator)</li>
                    </ul>
                    <br />
                    It's still a beta version : there are many many ways this could be enhanced (suggestions and patches are welcome : the source code is on <a href="https://github.com/mossroy/evopedia-html5" target="_blank">github</a>). In particular :
                    <ul>
                        <li>The User Interface is very young and has to be improved</li>
                        <li>In some rare cases, the links inside an article do not work, or do not lead to the right article</li>
                        <li>It is not easy to use on the Peak device from Geeksphone because the buttons and inputs are too small</li>
                        <li>Some features of the original application still have to be implemented : in particular geolocation of articles</li>
                    </ul>
                    The <a href="https://github.com/mossroy/evopedia-html5/issues" target="_blank">bugtracker</a> is on github too.
                    <br />
                </div>
                
                <div id="configuration">
                    <h2>Configuration</h2>
                    <div id="openLocalFiles" style="display: none;">
                        <br /> Please select the file titles.idx :<br />
                        <input type="file" id="titleFile" class="btn" /><br />
                        Please select the files wikipedia_*.dat from the same dump :<br />
                        <input type="file" id="dataFiles" multiple class="btn" /><br />
                        Please select the file math.idx from the same dump:<br />
                        <input type="file" id="mathIndexFile" class="btn" /><br />
                        Please select the file math.dat from the same dump:<br />
                        <input type="file" id="mathDataFile" class="btn" /><br />
                        Please select the file metadata.txt from the same dump:<br />
                        <input type="file" id="metadataFile" class="btn" /><br />
                    </div>
                    <div id="scanningForArchives" style="display: none;">
                        <br /> Scanning your sdcard for archives... Please wait <img src="img/spinner.gif" />
                    </div>
                    <div id="chooseArchiveFromLocalStorage" style="display: none;">
                        <br /> Please select the archive you want to use : <select id="archiveList"></select>
                    </div>
                    <br />
                </div>
                
                <!-- List of articles matching the typed prefix -->
                <ul id="titleList">
                </ul>
                <br />
                <div id="readingArticle" style="display: none;">
                    Reading article <span id="articleName"></span> from dump... Please wait <img src="img/spinner.gif" />
                </div>
                <div id="articleContent">&nbsp;</div>
                <br />
            </article>
            <footer>
                <div id="navigationButtons" class="btn-toolbar">
                    <a class="btn" id="btnBack"><i class="icon-arrow-left"></i></a>
                    <a class="btn" id="btnForward"><i class="icon-arrow-right"></i></a>
                    &nbsp;
                    <a class="btn" id="btnConfigure"><i class="icon-cog"></i></a>
                    <a class="btn" id="btnAbout"><i class="icon-question-sign"></i></a>
                </div>
            </footer>
        </section>

        <!-- Using require.js, a module system for javascript, include the
             js files. This loads "main.js", which in turn can load other
             files, all handled by require.js:
             http://requirejs.org/docs/api.html#jsfiles -->
        <script type="text/javascript"
                data-main="js/init.js"
        src="js/lib/require.js"></script>
    </body>
</html>
